<!DOCTYPE html>
<html>
	<head>
		<title>Warden</title>
		<meta charset="utf-8" />
		
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<script src='https://code.jquery.com/jquery-1.11.3.min.js'></script>
		<script src='https://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js'></script>
		
		
		
		
		<script src="https://apis.google.com/js/platform.js" defer></script>
		<script async src="https://www.googletagmanager.com/gtag/js?id=UA-144497616-1"></script>
		
		<meta name="google-signin-client_id" content="14788876155-26tavl9ut4bmlncej9ce21a3tstrj1ca.apps.googleusercontent.com">
		
		<script>
			window.dataLayer = window.dataLayer || [];
			function gtag(){dataLayer.push(arguments);}
			gtag('js', new Date());
			gtag('set', {'user_id': 'USER_ID'});
			gtag('config', 'UA-144497616-1');
		</script>
		
		
		
		<meta name="web_author" content="Core Hound System, LLC">
		<meta http-equiv="window-target" content="_top">
		
	</head>
	<body>
		<div id="tempStuff">
			<p>Google Sheets API Quickstart</p>

			<!--Add buttons to initiate auth sequence and sign out-->
			<button id="authorize_button" style="display: none;">Authorize</button>
			<button id="signout_button" style="display: none;">Sign Out</button>

			<pre id="content" style="white-space: pre-wrap;"></pre>

		</div>
		
		<script>
		//relevant variables
		var CLIENT_ID = '14788876155-26tavl9ut4bmlncej9ce21a3tstrj1ca.apps.googleusercontent.com';
		var API_KEY = 'AIzaSyBFvl3ULZmidAM02q-8R_o5bUjWoSne37g';
		
		var DISCOVERY_DOCS = ["https://sheets.googleapis.com/$discovery/rest?version=v4","https://www.googleapis.com/discovery/v1/apis/gmail/v1/rest","https://www.googleapis.com/discovery/v1/apis/calendar/v3/rest","https://www.googleapis.com/discovery/v1/apis/people/v1/rest"];
		
		var SCOPES = "https://www.googleapis.com/auth/spreadsheets.readonly https://mail.google.com/ https://www.googleapis.com/auth/calendar https://www.googleapis.com/auth/contacts";
		
		var authorizeButton = document.getElementById('authorize_button');
		var signoutButton = document.getElementById('signout_button');
		
		function handleClientLoad() {
			gapi.load('client:auth2', initClient);
		}
		
		function initClient() {
			gapi.client.init({
				apiKey: API_KEY,
				clientId: CLIENT_ID,
				discoveryDocs: DISCOVERY_DOCS,
				scope: SCOPES
			}).then(function () {
				// Listen for sign-in state changes.
				gapi.auth2.getAuthInstance().isSignedIn.listen(updateSigninStatus);
				// Handle the initial sign-in state.
				updateSigninStatus(gapi.auth2.getAuthInstance().isSignedIn.get());
				authorizeButton.onclick = handleAuthClick;	//alter buttons as needed - cosmetic
				signoutButton.onclick = handleSignoutClick;
			}, function(error) {
				appendPre(JSON.stringify(error, null, 2));
			});
		}
		
		function updateSigninStatus(isSignedIn) {
			if (isSignedIn) {
				authorizeButton.style.display = 'none';		//handles the appearance of sign in/out buttons
				signoutButton.style.display = 'block';
				//do this on login....
				console.log("Loaded to normal point.");
				
				//listMajors();
			} else {
				authorizeButton.style.display = 'block';
				signoutButton.style.display = 'none';
			}
		}
		
		function handleAuthClick(event) {
			gapi.auth2.getAuthInstance().signIn();
		}
		
		function handleSignoutClick(event) {
			gapi.auth2.getAuthInstance().signOut();
		}
		</script>
		<script async defer src="https://apis.google.com/js/api.js"
			onload="this.onload=function(){};handleClientLoad()"
			onreadystatechange="if (this.readyState === 'complete') this.onload()">
		</script>
	</body>
</html>
